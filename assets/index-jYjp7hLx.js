(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const m=7,g="habitDotsData";let r=y();const o=document.getElementById("new-habit-input"),p=document.getElementById("add-habit-button"),u=document.getElementById("habits-list-container"),b=document.getElementById("reset-week-button");function f(){localStorage.setItem(g,JSON.stringify(r))}function y(){const e=localStorage.getItem(g);if(e){const t=JSON.parse(e);return t.forEach(s=>{(!s.days||s.days.length!==m)&&(s.days=Array(m).fill(null).map(()=>({status:"pending"})))}),t}return[]}function l(){if(u){if(u.innerHTML="",r.length===0){u.innerHTML='<p class="empty-state">No habits yet. Add one to get started!</p>';return}r.sort((e,t)=>e.createdAt-t.createdAt),r.forEach(e=>{const t=document.createElement("div");t.className="habit-item",t.setAttribute("role","listitem"),t.setAttribute("aria-label",`${e.name} habit`);const s=document.createElement("span");s.className="habit-name",s.textContent=e.name;const i=document.createElement("div");i.className="habit-dots",i.setAttribute("role","group"),i.setAttribute("aria-label",`${e.name} daily status`),e.days.forEach((a,c)=>{const d=document.createElement("button");d.className=`dot ${a.status}`,d.setAttribute("aria-label",`Day ${c+1}, status: ${a.status}. Click to change.`),d.setAttribute("data-habit-id",e.id.toString()),d.setAttribute("data-day-index",c.toString()),d.addEventListener("click",()=>A(e.id,c)),i.appendChild(d)});const n=document.createElement("button");n.className="remove-habit-button",n.textContent="Remove",n.setAttribute("aria-label",`Remove habit: ${e.name}`),n.addEventListener("click",()=>E(e.id)),t.appendChild(s),t.appendChild(i),t.appendChild(n),u.appendChild(t)})}}function h(){if(!o)return;const e=o.value.trim();if(e===""){alert("Please enter a habit name."),o.focus();return}const t={id:Date.now(),name:e,days:Array(m).fill(null).map(()=>({status:"pending"})),createdAt:Date.now()};r.push(t),o.value="",f(),l(),o.focus()}function E(e){r=r.filter(t=>t.id!==e),f(),l()}function A(e,t){const s=r.find(i=>i.id===e);if(s&&s.days[t]){const i=s.days[t].status;i==="pending"?s.days[t].status="done":i==="done"?s.days[t].status="missed":s.days[t].status="pending",f(),l()}}function v(){if(r.length===0){alert("No habits to reset. Add some habits first!");return}confirm("Are you sure you want to start a new week? This will reset all habit progress.")&&(r.forEach(t=>{t.days=Array(m).fill(null).map(()=>({status:"pending"}))}),f(),l())}p&&o&&(p.addEventListener("click",h),o.addEventListener("keypress",e=>{e.key==="Enter"&&h()}));b&&b.addEventListener("click",v);document.addEventListener("DOMContentLoaded",()=>{l(),o&&o.focus()});
