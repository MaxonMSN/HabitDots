(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();const m=7,g="habitDotsData";let r=[];const o=document.getElementById("new-habit-input"),p=document.getElementById("add-habit-button"),u=document.getElementById("habits-list-container"),b=document.getElementById("reset-week-button");function f(){localStorage.setItem(g,JSON.stringify(r))}function y(){const e=localStorage.getItem(g);e&&(r=JSON.parse(e),r.forEach(t=>{(!t.days||t.days.length!==m)&&(t.days=Array(m).fill(null).map(()=>({status:"pending"})))}))}function l(){if(u){if(u.innerHTML="",r.length===0){u.innerHTML='<p class="empty-state">No habits yet. Add one to get started!</p>';return}r.sort((e,t)=>e.createdAt-t.createdAt),r.forEach(e=>{const t=document.createElement("div");t.className="habit-item",t.setAttribute("role","listitem"),t.setAttribute("aria-label",`${e.name} habit`);const i=document.createElement("span");i.className="habit-name",i.textContent=e.name;const a=document.createElement("div");a.className="habit-dots",a.setAttribute("role","group"),a.setAttribute("aria-label",`${e.name} daily status`),e.days.forEach((s,c)=>{const d=document.createElement("button");d.className=`dot ${s.status}`,d.setAttribute("aria-label",`Day ${c+1}, status: ${s.status}. Click to change.`),d.setAttribute("data-habit-id",e.id.toString()),d.setAttribute("data-day-index",c.toString()),d.addEventListener("click",()=>A(e.id,c)),a.appendChild(d)});const n=document.createElement("button");n.className="remove-habit-button",n.textContent="Remove",n.setAttribute("aria-label",`Remove habit: ${e.name}`),n.addEventListener("click",()=>E(e.id)),t.appendChild(i),t.appendChild(a),t.appendChild(n),u.appendChild(t)})}}function h(){if(!o)return;const e=o.value.trim();if(e===""){alert("Please enter a habit name."),o.focus();return}const t={id:Date.now(),name:e,days:Array(m).fill(null).map(()=>({status:"pending"})),createdAt:Date.now()};r.push(t),o.value="",f(),l(),o.focus()}function E(e){r=r.filter(t=>t.id!==e),f(),l()}function A(e,t){const i=r.find(a=>a.id===e);if(i&&i.days[t]){const a=i.days[t].status;a==="pending"?i.days[t].status="done":a==="done"?i.days[t].status="missed":i.days[t].status="pending",f(),l()}}function v(){if(r.length===0){alert("No habits to reset. Add some habits first!");return}confirm("Are you sure you want to start a new week? This will reset all habit progress.")&&(r.forEach(t=>{t.days=Array(m).fill(null).map(()=>({status:"pending"}))}),f(),l())}p&&o&&(p.addEventListener("click",h),o.addEventListener("keypress",e=>{e.key==="Enter"&&h()}));b&&b.addEventListener("click",v);document.addEventListener("DOMContentLoaded",()=>{y(),l(),o&&o.focus()});
